<div class="modal is-active">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="box">
      <h3 class="title is-3">Create Account</h3>
      <form [formGroup]="form">
        <label class="checkbox">
          <input type="checkbox" formControlName="mailingList">
          I want to receive updates and promotional emails. Sign me up for the mailing list.
        </label>
        <div class="field">
          <label class="checkbox">
            <input type="checkbox" formControlName="terms">
            I agree to the <a target="_blank" href="/tos">Terms of Service</a> and <a target="_blank" href="/privacy-policy">Privacy Policy</a>.
          </label>
        </div>
        <hr>
        <div class="columns">
          <div class="column border-right">
            <div class="field">
              <label class="label">Username</label>
              <div class="control has-icons-left has-icons-right">
                <input
                  class="input"
                  [class.is-danger]="form.get('username')?.invalid && form.get('username')?.touched"
                  type="text"
                  placeholder="lizard-king"
                  formControlName="username"
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-user"></i>
                </span>
              </div>
              <p
                *ngIf="form.get('username')?.touched && form.get('username')?.invalid"
                class="help"
                [class.is-danger]="form.get('username')?.invalid && form.get('username')?.touched"
              >Username must be between 4 and 20 characters.</p>
            </div>

            <div class="field">
              <label class="label">Email</label>
              <div class="control has-icons-left has-icons-right">
                <input
                  class="input"
                  [class.is-danger]="form.get('email')?.invalid && form.get('email')?.touched"
                  type="email"
                  placeholder="me@codypotter.com"
                  formControlName="email"
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-envelope"></i>
                </span>
              </div>
              <p
                *ngIf="form.get('email')?.touched && form.get('email')?.invalid"
                class="help"
                [class.is-danger]="form.get('email')?.invalid && form.get('email')?.touched"
              >Email is invalid.</p>
            </div>

            <div class="field">
              <label class="label">Password</label>
              <div class="control has-icons-left has-icons-right">
                <input
                  class="input"
                  [class.is-danger]="form.get('password')?.invalid && form.get('password')?.touched"
                  type="password"
                  placeholder="password123"
                  formControlName="password"
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-lock"></i>
                </span>
              </div>
              <p
                *ngIf="form.get('password')?.touched && form.get('password')?.invalid"
                class="help"
                [class.is-danger]="form.get('password')?.invalid && form.get('password')?.touched"
              >Password must be 8 to 20 characters long, and include at least one lowercase letter, one
                uppercase letter, one digit, and one special character.</p>
            </div>

            <div class="field">
              <label class="label">Confirm Password</label>
              <div class="control has-icons-left has-icons-right">
                <input
                  class="input"
                  [class.is-danger]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched"
                  type="password"
                  placeholder="password123"
                  formControlName="confirmPassword"
                  (blur)="validateMatchingPasswords()"
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-lock"></i>
                </span>
              </div>
              <p
                *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid"
                class="help"
                [class.is-danger]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched"
              >Passwords must match.</p>
            </div>

            <button
              class="button is-primary is-fullwidth"
              (click)="onCreateAccount()"
            >Create Account</button>
          </div>

          <div class="column oauth">
            <h5 class="title is-5 has-text-centered">Or Use Social Sign-in</h5>
            <button class="button is-dark is-fullwidth">
              <span class="icon">
                <i class="fab fa-github"></i>
              </span>
              <span>Log in with GitHub</span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <button
    class="modal-close is-large"
    aria-label="close"
    (click)="onCancel()"
  ></button>
</div>