// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.856
package post

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"loficode/model"
	"loficode/templates/components"
	"loficode/templates/components/page"
)

func Post(post model.Post, baseUrl string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = page.Page(
			page.HeadConfig{
				Title:       post.Title + " | loficode",
				Description: post.Summary,
				OgImage:     post.OpenGraphImage,
			},
			[]page.Breadcrumb{
				{Text: "home", Url: "/"},
				{Text: "posts", Url: "/posts.html"},
				{Text: post.Slug, Url: "/posts/" + post.Slug + ".html"},
			},
			content(post, baseUrl),
		).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func content(post model.Post, baseUrl string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var2 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var2 == nil {
			templ_7745c5c3_Var2 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<style>\n\t\t.related-post {\n\t\t\tmax-width: 450px;\n\t\t}\n\t</style><article class=\"container is-max-desktop\"><div class=\"card-image\"><figure class=\"image is-3by1\"><img alt=\"Header Image\" src=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(post.HeaderImage)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/pages/post/post.templ`, Line: 36, Col: 27}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\"></figure></div><div class=\"card-content\"><div class=\"media\"><div class=\"media-content\"><h4 class=\"is-size-4\">Cody Potter - Posted on ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 string
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(post.Date.String())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/pages/post/post.templ`, Line: 43, Col: 71}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</h4><h1 class=\"title is-size-1\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var5 string
		templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(post.Title)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/pages/post/post.templ`, Line: 44, Col: 45}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</h1><div class=\"mb-5\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.Tags(components.TagsConfig{
			Size:             "is-medium",
			Tags:             post.Tags,
			EnableNavigation: true,
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = SocialButtons(post, baseUrl).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</div></div><div class=\"content\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.Raw(post.Content).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = SocialButtons(post, baseUrl).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</div></article><div class=\"container block is-max-desktop mt-5\"><h4 class=\"title is-4 mb-5\">Comments</h4>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.CommentForm(components.CommentFormConfig{Slug: post.Slug}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<div class=\"mt-5\"><div id=\"comments-section\" hx-get=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var6 string
		templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs("/api/posts/" + post.Slug + "/comments")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/pages/post/post.templ`, Line: 65, Col: 78}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "\" hx-trigger=\"load\" hx-swap=\"outerHTML\"><p>Loading comments...</p></div></div></div><div class=\"container p-5 block is-max-desktop\"><h4 class=\"title is-4 mb-5\">Related Posts</h4><div hx-get=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var7 string
		templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs("/api/post-previews")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/pages/post/post.templ`, Line: 72, Col: 36}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\" hx-trigger=\"load\" hx-swap=\"outerHTML\"></div></div><script>\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function () {\n\t\t\tfunction getElementById(id) {\n\t\t\t\tconst element = document.getElementById(id);\n\t\t\t\tif (!element) {\n\t\t\t\t\tconsole.debug(`${id} not found.`);\n\t\t\t\t}\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tfunction handleLocalStorage(key, elementId) {\n\t\t\t\tconst value = localStorage.getItem(\"loficode.\"+key);\n\t\t\t\tconst element = getElementById(elementId);\n\t\t\t\tif (value === \"true\" && element) {\n\t\t\t\t\tconsole.debug(`${key} is true, hiding ${elementId}.`);\n\t\t\t\t\telement.style.display = \"none\";\n\t\t\t\t} else if (element) {\n\t\t\t\t\tconsole.debug(`${key} is not true, keeping ${elementId} visible.`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction prefillField(localStorageKey, inputId) {\n\t\t\t\tconst value = localStorage.getItem(localStorageKey);\n\t\t\t\tconst input = getElementById(inputId);\n\t\t\t\tif (value && input) {\n\t\t\t\t\tconsole.debug(`${localStorageKey} found in localStorage, populating ${inputId}.`);\n\t\t\t\t\tinput.value = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction saveFieldToLocalStorage(inputId, localStorageKey) {\n\t\t\t\tconst input = getElementById(inputId);\n\t\t\t\tif (input) {\n\t\t\t\t\tconsole.debug(`Saving ${inputId} to ${localStorageKey}.`);\n\t\t\t\t\tlocalStorage.setItem(\"loficode.\"+localStorageKey, input.value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction saveCheckboxToLocalStorage(checkboxName, localStorageKey) {\n\t\t\t\tconst checkbox = document.querySelector(`input[name='${checkboxName}']`);\n\t\t\t\tif (checkbox && checkbox.checked) {\n\t\t\t\t\tconsole.debug(`${checkboxName} is checked, saving to ${localStorageKey}.`);\n\t\t\t\t\tlocalStorage.setItem(\"loficode.\"+localStorageKey, \"true\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprefillField(\"commentFormName\", \"nameInput\");\n\t\t\tprefillField(\"commentFormEmail\", \"emailInput\");\n\n\t\t\thandleLocalStorage(\"mailingListSignedUp\", \"mailingListCheckbox\");\n\t\t\thandleLocalStorage(\"termsAccepted\", \"termsField\");\n\n\t\t\tconst commentForm = getElementById(\"commentForm\");\n\t\t\tif (commentForm) {\n\t\t\t\tconsole.debug(\"Comment form found, setting up event listener.\");\n\t\t\t\tcommentForm.addEventListener(\"submit\", function () {\n\t\t\t\t\tsaveFieldToLocalStorage(\"nameInput\", \"commentFormName\");\n\t\t\t\t\tsaveFieldToLocalStorage(\"emailInput\", \"commentFormEmail\");\n\t\t\t\t\tsaveCheckboxToLocalStorage(\"mailingList\", \"mailingListSignedUp\");\n\t\t\t\t\tsaveCheckboxToLocalStorage(\"terms\", \"termsAccepted\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.debug(\"Comment form not found, skipping event listener setup.\");\n\t\t\t}\n\t\t});\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
